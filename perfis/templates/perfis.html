{% extends "base.html" %}

{% block body %}
<div class="panel panel-default">
	<div class="panel-heading">
		<strong>Gerenciar perfis</strong>
	</div>
	<div class="panel-body">
		{% if perfis %}
			<table class="table table-striped">
				<thead>
					<tr>
						<th>Código</th>
						<th>Nome</th>
						<th>Ações</th>
					</tr>
				</thead>
				<tbody>
					{% for perfil in perfis %}
						<tr>
							<td>{{ perfil.id }}</td>
							<td>{{ perfil.nome }}</td>
							<td>
								<a href="{% url 'exibir' perfil.id %}" alt="Editar"><span class="glyphicon glyphicon-th-list"></span></a>
								<a href="{% url 'convidar' perfil.id %}" alt="Convidar"><span class="glyphicon glyphicon-user"></span></a>
							</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		{% else %}
			<p>Nenhum perfil encontrado</p>
		{% endif %}
	</div>
</div>

{% with qtd_convites=perfil_logado.convites_recebidos.count %}
{% if qtd_convites %}
	<div class="panel-group">
		<div class="panel panel-default">
			<div class="panel-heading">
				<a data-toggle="collapse" href="#collapse1">
					<strong>Convites aguardando aprovação ({{qtd_convites}})</strong>
				</a>
			</div>
			<div id="collapse1" class="panel-collapse collapse">
				<ul class="list-group" style="padding: 10px">
				{% for convite in perfil_logado.convites_recebidos.all %}
					<li class="list-group-item">
						{{ convite.solicitante.nome }}
						<a href="#" class="pull-right">Aceitar</a>
					</li>
				{% endfor %}
				</ul>
			</div>
		</div>
	</div>
{% else %}
	<div class="panel panel-default">
		<div class="panel-heading">
			<strong>Nenhum convite pendente</strong>
		</div>
	</div>
{% endif %}
{% endwith %}

<div class="panel-buttons">
	<div class="pull-left">
		<a href="{% url 'index' %}" class="btn btn-danger">Página inicial</a>
	</div>
</div>
{% endblock %}